(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{105:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__jpPIU"}},106:function(e,t,n){e.exports={container:"ingredient_container__31gjh"}},107:function(e,t,n){e.exports={block:"orderFeed_block__1kXAE"}},108:function(e,t,n){},11:function(e,t,n){e.exports={container:"profile_container__2BbXp",main:"profile_main__qGy5r",nav:"profile_nav__1ddV4",navList:"profile_navList__2P6zY",list:"profile_list__2lI8E",list_active:"profile_list_active__kvN4j",link:"profile_link__1-1p8",info:"profile_info__1RTkK",footer:"profile_footer__dPUqU",orders:"profile_orders__c8-sy",buttons:"profile_buttons__1vzW7",buttons_active:"profile_buttons_active__1jOEG",orderListInfo:"profile_orderListInfo__1BBG4"}},116:function(e,t,n){},13:function(e,t,n){e.exports={container:"cardOrder_container__UjN-B",id:"cardOrder_id__2kL18",cardName:"cardOrder_cardName__3SuIQ",header:"cardOrder_header__G4Rbk",date:"cardOrder_date__cUm5f",footer:"cardOrder_footer__37t7r",icons:"cardOrder_icons__npQ9C",icon:"cardOrder_icon__1Xn2l",pick:"cardOrder_pick__piW_2",lastPick:"cardOrder_lastPick__1S6_A",price:"cardOrder_price__1xXaP",status:"cardOrder_status__1YPwR",link:"cardOrder_link__2niJ9",count:"cardOrder_count__2nsey"}},14:function(e,t,n){e.exports={container:"orderInformation_container__3HiG_",id:"orderInformation_id__38XXk",status:"orderInformation_status__1vHEl",orderList:"orderInformation_orderList__1AT88",list:"orderInformation_list__TNCb4",ingredient:"orderInformation_ingredient__7_6_p",icon:"orderInformation_icon__3TVX3",img:"orderInformation_img__Ue1iB",name:"orderInformation_name__2l0hA",price:"orderInformation_price__2BDqY",priceValue:"orderInformation_priceValue__345Ag",footer:"orderInformation_footer__2s5UX",date:"orderInformation_date__1Aj2q",resultPrice:"orderInformation_resultPrice__11W5v"}},17:function(e,t,n){e.exports={block:"app-header_block__2OXB7",button:"app-header_button__1tHq1",button_active:"app-header_button_active__N4rAI",link:"app-header_link__2y8TU",buttonName:"app-header_buttonName__1ex0G",logo:"app-header_logo__zVEfY",navigationShop:"app-header_navigationShop__pveBR",container:"app-header_container__2ER_-"}},200:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t),n.d(t,"composeEnhancers",(function(){return on})),n.d(t,"enhancer",(function(){return un})),n.d(t,"store",(function(){return ln}));var c=n(1),r=n.n(c),a=n(36),s=n.n(a),o=(n(116),n(3)),i=n(76),u=n.n(i),l=n(17),d=n.n(l),j=n(5),b=n(6),f=n(10),O=n(0);var p=function(){var e=Object(f.h)();return Object(O.jsx)("header",{className:d.a.block,children:Object(O.jsxs)("div",{className:d.a.container,children:[Object(O.jsxs)("div",{className:d.a.navigationShop,children:[Object(O.jsxs)(b.b,{to:{pathname:"/"},className:"/"===e.pathname?d.a.button_active:d.a.button,children:[Object(O.jsx)(j.BurgerIcon,{type:"/"===e.pathname?"primary":"secondary"}),Object(O.jsx)("p",{className:"".concat(d.a.buttonName," text text_type_main-default ml-2"),children:"\u041a\u043e\u043d\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(O.jsxs)(b.b,{to:{pathname:"/feed"},className:"/feed"===e.pathname?d.a.button_active:d.a.button,children:[Object(O.jsx)(j.ListIcon,{type:"/feed"===e.pathname?"primary":"secondary"}),Object(O.jsx)("p",{className:"".concat(d.a.buttonName," text text_type_main-default ml-2"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(O.jsx)("div",{className:d.a.logo,children:Object(O.jsx)(b.b,{to:{pathname:"/"},children:Object(O.jsx)(j.Logo,{})})}),Object(O.jsxs)(b.c,{to:{pathname:"/profile"},className:d.a.button,activeClassName:d.a.button_active,children:[Object(O.jsx)(j.ProfileIcon,{type:"/profile"===e.pathname||"/profile/orders"===e.pathname?"primary":"secondary"}),Object(O.jsx)("p",{className:"".concat(d.a.buttonName," text text_type_main-default ml-2"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},m=n(30),_=n.n(m),h=n(37),g=n.n(h),x=n(208),v=n(44),y=v.c,N=function(){return Object(v.b)()},E=function(e){var t=e.item,n=e.onOpen,c=e.id,r=y((function(e){return e.constructorReducer})).ingredientsInBurgerConstructor;var a=Object(x.a)({type:"items",item:t,collect:function(e){return{opacity:e.isDragging()?.5:1}}}),s=Object(o.a)(a,2),i=s[0].opacity,u=s[1],l=Object(f.h)();return Object(O.jsxs)("section",{className:"".concat(g.a.card," ml-4 mb-10"),style:{opacity:i},ref:u,children:[Object(O.jsx)("div",{className:g.a.count,children:Object(O.jsx)(j.Counter,{count:"bun"===t.type?0!==r.bun.filter((function(e){return e._id===c})).length?r.bun.filter((function(e){return e._id===c})).length+1:0:r.other.filter((function(e){return e._id===c})).length,size:"default"})}),Object(O.jsx)(b.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:l}},children:Object(O.jsx)("img",{className:"".concat(g.a.image," mb-1 ml-4 mr-4"),src:t.image,onClick:function(){n(t)},alt:t.name})}),Object(O.jsxs)("div",{className:"".concat(g.a.price," mb-1"),children:[Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(O.jsx)("p",{className:"".concat(g.a.name," text text_type_main-default"),children:t.name})]})},S=function(e){var t=e.openModal,n=e.onClose,a=y((function(e){return e.ingredientsReducer})).ingredients,s=r.a.useState("bun"),i=Object(o.a)(s,2),u=i[0],l=i[1],d=Object(c.useRef)(null),b=Object(c.useRef)(null),f=Object(c.useRef)(null);return Object(O.jsxs)("section",{className:_.a.block,children:[Object(O.jsx)("h2",{className:"text text_type_main-large mb-5 mt-10",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(O.jsxs)("nav",{className:"".concat(_.a.nav," text text_type_main-default mb-10"),children:[Object(O.jsx)(j.Tab,{value:"bun",active:"bun"===u,onClick:function(){d.current&&(l("bun"),d.current.scrollIntoView({behavior:"smooth"}))},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(O.jsx)(j.Tab,{value:"sauces",active:"sauces"===u,onClick:function(){b.current&&(l("sauces"),b.current.scrollIntoView({behavior:"smooth"}))},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(O.jsx)(j.Tab,{value:"main",active:"main"===u,onClick:function(){f.current&&(l("main"),f.current.scrollIntoView({behavior:"smooth"}))},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(O.jsxs)("section",{className:_.a.mainMenu,onScroll:function(e){d.current&&e.target.scrollTop>=d.current.offsetTop/2&&l("bun"),b.current&&e.target.scrollTop>=b.current.offsetTop/2&&l("sauces"),f.current&&e.target.scrollTop>=f.current.offsetTop/2&&l("main")},children:[Object(O.jsxs)("div",{ref:d,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(O.jsx)("ul",{className:_.a.item,children:a.map((function(e){if("bun"===e.type)return Object(O.jsx)(E,{item:e,onOpen:t,onClose:n,id:e._id},e._id)}))})]}),Object(O.jsxs)("div",{className:_.a.mainMenu2,ref:b,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(O.jsx)("ul",{className:_.a.item,children:a.map((function(e){if("sauce"===e.type)return Object(O.jsx)(E,{card:e,onOpen:t,id:e._id,item:e},e._id)}))})]}),Object(O.jsxs)("div",{ref:f,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(O.jsx)("ul",{className:_.a.item,children:a.map((function(e){if("main"===e.type)return Object(O.jsx)(E,{card:e,onOpen:t,id:e._id,item:e},e._id)}))})]})]})]})},R=n(24),C=n.n(R),I=n(55),T=n.n(I),D="https://norma.nomoreparties.space/api",k=document.getElementById("modals");function w(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}var L=n(105),P=n.n(L),U=function(e){var t=e.onOpen,n=e.onClose;return t?Object(O.jsx)("div",{className:P.a.overlay,onClick:n}):null},F=function(e){var t=e.onClose,n=e.onOpen,c=e.children;function a(e){"Escape"===e.key&&t(t)}return r.a.useEffect((function(){return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}),[]),n?s.a.createPortal(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U,{onClose:t,onOpen:n}),Object(O.jsxs)("div",{className:T.a.popup,onKeyDown:a,children:[Object(O.jsx)("div",{className:"".concat(T.a.container),children:Object(O.jsx)("div",{className:T.a.close,children:Object(O.jsx)(j.CloseIcon,{type:"primary",onClick:t})})}),c]})]}),k):null},A=n(79),q=n.n(A),G=function(){var e=y((function(e){return e.constructorReducer})).createdOrder;return Object(O.jsxs)("div",{className:q.a.container,children:[Object(O.jsx)("p",{className:"text text_type_digits-large mt-30 mb-8",id:"orderNumber",children:e.number?e.number:"Load..."}),Object(O.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(O.jsx)("div",{className:"".concat(q.a.done," mb-15")}),Object(O.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},B=n(209),M=function(e){var t=e.handleClose,n=e.moveListItem,r=e.index,a=e.item,s=e.type,i=e.isLocked,u=y((function(e){return e.constructorReducer})).ingredientsInBurgerConstructor,l=Object(c.useRef)(null),d=Object(x.a)({type:"item",item:a,collect:function(e){return{isDragging:e.isDragging()}}}),b=Object(o.a)(d,2)[1],f=Object(B.a)({accept:"item",hover:function(e){var t=u.other.findIndex((function(t){return t._id===e._id}));n(t,r)},collect:function(e){return{opacity:e.isOver()?.2:1}}}),p=Object(o.a)(f,2),m=p[0].opacity;return b((0,p[1])(l)),"bun"===a.type?Object(O.jsx)("li",{className:C.a.bun,style:{opacity:m},children:Object(O.jsx)(j.ConstructorElement,{text:"top"===s?"".concat(a.name," (\u0432\u0435\u0440\u0445)"):"bottom"===s?"".concat(a.name," (\u043d\u0438\u0437)"):a.name,price:a.price,thumbnail:a.image,handleClose:t,type:s,isLocked:i})}):Object(O.jsxs)("li",{className:C.a.item,style:{opacity:m},ref:l,children:[Object(O.jsx)(j.DragIcon,{type:"secondary"}),Object(O.jsx)(j.ConstructorElement,{text:a.name,price:a.price,thumbnail:a.image,handleClose:t,type:s,isLocked:i})]})},Q="ADD_INGREDIENT_BURGERCONSTRUCTOR",W="DELETE_INGREDIENT_BURGERCONSTRUCTOR",V="CHANGE_ORDER_BURGERCONSTRUCTOR",X="GET_ORDER_REQUEST",H="GET_ORDER_SUCCESS",z="GET_ORDER_FAILED",J="GET_ORDER_CLOSE",Y=function(e,t){return function(n){n({type:X}),function(e,t){return fetch("".concat(D,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",authorization:t},body:JSON.stringify({ingredients:e})}).then(w)}(e,t).then((function(e){var t;console.log(e),e.success?n((t=e.order,{type:H,createdOrder:t})):n({type:z})})).catch((function(e){console.log(e)}))}},K=function(e){var t=e.openModal,n=e.onClose,a=e.onOpen,s=r.a.useState(0),i=Object(o.a)(s,2),u=i[0],l=i[1],d=y((function(e){return e.constructorReducer})).ingredientsInBurgerConstructor,b=N(),p=Object(f.g)();Object(c.useEffect)((function(){var e=d.other.reduce((function(e,t){return t.price+e}),0);l((d.bun[0]?2*d.bun[0].price:0)+e)}),[d]);var m=Object(B.a)({accept:"items",collect:function(e){return{isHover:e.isOver()}},drop:function(e){b(function(e){return{type:Q,item:e}}(e))}}),_=Object(o.a)(m,2),h=_[0].isHover,g=_[1],x=function(e){b(function(e){return{type:W,id:e}}(e))},v=h?"lightgreen":"transparent";var E=function(e,t,n){var c;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=this,i=function(){c=null,n||e.apply(o,a)},u=n&&!c;clearTimeout(c),c=setTimeout(i,t),u&&e.apply(o,a)}}(Object(c.useCallback)((function(e,t){b(function(e,t,n){return{type:V,item:e,dragIndex:t,hoverIndex:n}}(d.other,e,t))}),[d.other,b])),S=y((function(e){return e.loginReducer})).login;return Object(O.jsxs)("section",{className:"".concat(C.a.block," mt-25"),children:[Object(O.jsxs)("ul",{className:"".concat(C.a.list),style:{borderColor:v},ref:g,id:"orderPlace",children:[d.bun.map((function(e,t){return Object(O.jsx)(M,{handleClose:function(){x(String(e._id)+t)},type:"top",isLocked:!0,item:e},String(e._id)+t)})),Object(O.jsx)("div",{className:C.a.container,children:d.other.map((function(e,t){return Object(O.jsx)(M,{handleClose:function(){x(String(e._id)+t)},index:t,moveListItem:E,item:e,type:void 0},String(e._id)+t)}))}),d.bun.map((function(e,t){return Object(O.jsx)(M,{handleClose:function(){x(String(e._id)+t)},type:"bottom",isLocked:!0,item:e},String(e._id)+t)}))]}),Object(O.jsxs)("div",{className:"".concat(C.a.total," mt-10"),children:[Object(O.jsxs)("div",{className:"".concat(C.a.sum," mr-10"),children:[Object(O.jsx)("p",{className:"".concat(C.a.sumText," mr-2 text text_type_digits-medium"),children:u||0}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(O.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),S)if(0!==d.other.length&&0!==d.bun.length){var t=d.other.map((function(e){return e._id}));t.push(d.bun[0]._id),t.unshift(d.bun[0]._id),b(Y(t,localStorage.getItem("access"))),console.log(t),b({type:J}),d.other.splice(0),d.bun.splice(0)}else p.replace({pathname:"/"});else p.replace({pathname:"/login"})},children:Object(O.jsx)(j.Button,{type:"primary",size:"large",onClick:S&&0!==d.other.length&&0!==d.bun.length?t:void 0,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]}),Object(O.jsx)(F,{onClose:n,onOpen:a,children:Object(O.jsx)(G,{})})]})},$=n(110),Z=n(207),ee=n(38),te=n.n(ee),ne=function(e){var t=e.submit,n=e.title,c=e.children,r=e.buttonName,a=e.footerQuestion,s=e.link,o=e.footerLink,i=e.footerMoreQuestion,u=e.moreLink,l=e.footerMoreLink;return Object(O.jsxs)("section",{className:te.a.container,children:[Object(O.jsxs)("form",{className:te.a.form,onSubmit:t,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium mb-6",children:n}),c,Object(O.jsx)(j.Button,{type:"primary",size:"medium",children:r})]}),Object(O.jsxs)("p",{className:"".concat(te.a.footer," text text_type_main-default text_color_inactive"),children:[a," ",Object(O.jsx)(b.b,{className:te.a.footerLink,to:s,children:o})]}),Object(O.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:[" ",i,Object(O.jsx)(b.b,{className:te.a.footerLink,to:u,children:l})]})]})},ce="LOGIN_REQUEST",re="LOGIN_SUCCESS",ae="LOGIN_FAILED",se="LOGOUT_REQUEST",oe="LOGOUT_SUCCESS",ie="LOGOUT_FAILED",ue="GET_USER_REQUEST",le="GET_USER_SUCCESS",de="GET_USER_FAILED",je=function(e,t){return function(n){return n({type:ce}),function(e,t){return fetch(D+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(w)}(e,t).then((function(e){e.success?(localStorage.setItem("access",e.accessToken),localStorage.setItem("refresh",e.refreshToken),n({type:re,loginData:e})):n({type:ae})})).catch((function(e){console.log(e)}))}},be=function(e){return function(t){t({type:se}),function(e){return fetch(D+"/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(w)}(e).then((function(e){e.success?(localStorage.removeItem("access"),localStorage.removeItem("refresh"),t({type:oe,logoutData:e})):t({type:ie})})).catch((function(e){console.log(e)}))}},fe=function(e){return function(t){t({type:ue}),function(e){return fetch(D+"/auth/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){return e.json()}))}(e).then((function(e){e.success?t({type:le,userData:e}):t({type:de,status:e})})).catch((function(e){console.log(e)}))}};var Oe=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],l=N(),d=Object(f.g)(),b=localStorage.getItem("access"),p=y((function(e){return e.loginReducer})).loginData,m=Object(f.h)();return Object(c.useEffect)((function(){b&&p.success&&d.push(m.state?m.state.from.pathname:"/")}),[b,d,m.state,p]),Object(O.jsxs)(ne,{title:"\u0412\u0445\u043e\u0434",buttonName:"\u0412\u043e\u0439\u0442\u0438",footerQuestion:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",footerLink:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",link:"/register",footerMoreQuestion:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",footerMoreLink:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",moreLink:"/forgot-password",submit:function(e){e.preventDefault(),l(je(n,i))},children:[Object(O.jsx)(j.Input,{placeholder:"Email",type:"email",onChange:function(e){r(e.target.value)},value:n||""}),Object(O.jsx)(j.PasswordInput,{onChange:function(e){u(e.target.value)},value:i||"",name:"Password"})]})},pe="REGISTER_REQUEST",me="REGISTER_SUCCESS",_e="REGISTER_FAILED",he=function(e,t,n){return function(c){c({type:pe}),function(e,t,n){return fetch(D+"/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then(w)}(e,t,n).then((function(e){e.success?c({type:me,registerData:e}):c({type:_e})})).catch((function(e){console.log(e)}))}};var ge=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],l=Object(c.useState)(),d=Object(o.a)(l,2),b=d[0],p=d[1],m=N(),_=y((function(e){return e.registerReducer})).registerData,h=Object(f.g)(),g=localStorage.getItem("access");return Object(c.useEffect)((function(){_.success&&h.replace({pathname:"/"})}),[_,h]),Object(c.useEffect)((function(){g&&h.replace({pathname:"/"})}),[g,h]),Object(O.jsxs)(ne,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonName:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",footerQuestion:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",footerLink:"\u0412\u043e\u0439\u0442\u0438",link:"/login",submit:function(e){e.preventDefault(),m(he(n,i,b))},children:[Object(O.jsx)(j.Input,{placeholder:"\u0418\u043c\u044f",type:"text",onChange:function(e){p(e.target.value)},value:b||""}),Object(O.jsx)(j.Input,{placeholder:"Email",type:"email",onChange:function(e){r(e.target.value)},value:n||""}),Object(O.jsx)(j.PasswordInput,{onChange:function(e){u(e.target.value)},value:i||"",name:"Password"})]})},xe="FORGOT_PASSWORD_REQUEST",ve="FORGOT_PASSWORD_SUCCESS",ye="FORGOT_PASSWORD_FAILED",Ne=function(e){return function(t){t({type:xe}),function(e){return fetch(D+"/password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(w)}(e).then((function(e){e.success?t({type:ve,forgotPassword:e}):t({type:ye})})).catch((function(e){console.log(e)}))}};var Ee=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],a=N(),s=y((function(e){return e.forgotPasswordReducer})).forgotPassword,i=Object(f.g)(),u=localStorage.getItem("access");return Object(c.useEffect)((function(){!u&&s.success&&i.replace({pathname:"/reset-password"})}),[s,u,i]),Object(c.useEffect)((function(){u&&i.replace({pathname:"/"})}),[u,i]),Object(O.jsx)(ne,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonName:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",footerQuestion:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",footerLink:"\u0412\u043e\u0439\u0442\u0438",link:"/login",submit:function(e){e.preventDefault(),a(Ne(n))},children:Object(O.jsx)(j.Input,{placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",type:"email",onChange:function(e){r(e.target.value)},value:n||""})})},Se="RECOVERY_PASSWORD_REQUEST",Re="RECOVERY_PASSWORD_SUCCESS",Ce="RECOVERY_PASSWORD_FAILED",Ie=function(e,t){return function(n){n({type:Se}),function(e,t){return fetch(D+"/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then(w)}(e,t).then((function(e){e.success?n({type:Re,recoveryPassword:e}):n({type:Ce})})).catch((function(e){console.log(e)}))}};var Te=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],l=N(),d=y((function(e){return e.recoveryPasswordReducer})).recoveryPassword,b=Object(f.g)(),p=localStorage.getItem("access"),m=y((function(e){return e.forgotPasswordReducer})).forgotPassword;return Object(c.useEffect)((function(){d.success&&b.replace({pathname:"/"})}),[d,b]),Object(c.useEffect)((function(){m.success||b.replace({pathname:"/forgot-password"})})),Object(c.useEffect)((function(){p&&b.replace({pathname:"/"})}),[p,b]),Object(O.jsxs)(ne,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",footerQuestion:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",footerLink:"\u0412\u043e\u0439\u0442\u0438",submit:function(e){e.preventDefault(),l(Ie(n,i))},children:[Object(O.jsx)(j.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",onChange:function(e){r(e.target.value)},value:n||""}),Object(O.jsx)(j.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430 e-mail",type:"text",onChange:function(e){u(e.target.value)},value:i||""})]})},De=n(11),ke=n.n(De),we="UPDATE_USER_REQUEST",Le="UPDATE_USER_SUCCESS",Pe="UPDATE_USER_FAILED",Ue=function(e,t,n,c){return function(r){r({type:we}),function(e,t,n,c){return fetch(D+"/auth/user",{method:"PATCH",headers:{"Content-Type":"application/json",authorization:e},body:JSON.stringify({email:t,password:n,name:c})}).then((function(e){return e.json()}))}(e,t,n,c).then((function(e){e.success?r({type:Le,updateUser:e}):r({type:Pe,updatestatus:e})})).catch((function(e){console.log(e)}))}},Fe=n(27),Ae=n(13),qe=n.n(Ae),Ge=function(e){var t=e.order,n=e.status,a=e.onOpen,s=y((function(e){return e.ingredientsReducer})).ingredients,i=r.a.useState([]),u=Object(o.a)(i,2),l=u[0],d=u[1],p=r.a.useState(),m=Object(o.a)(p,2),_=m[0],h=m[1],g=r.a.useState(),x=Object(o.a)(g,2),v=x[0],N=x[1],E=r.a.useState(!0),S=Object(o.a)(E,2),R=S[0],C=S[1],I=r.a.useState(),T=Object(o.a)(I,2),D=T[0],k=T[1];Object(c.useEffect)((function(){t.ingredients.map((function(e){var t=s.filter((function(t){return t._id===e}));d((function(e){return[].concat(Object(Fe.a)(e),[t[0]])}))}))}),[s]),Object(c.useEffect)((function(){var e=l.reduce((function(e,t){return e+t.price}),0);h(e)}),[l]),Object(c.useEffect)((function(){C(n)}),[n]),Object(c.useEffect)((function(){var e=new Date,n=new Date(Date.parse(t.createdAt)),c=new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf(),r=Date.parse(t.createdAt).valueOf(),a="".concat(new Date(Date.parse(t.createdAt)).getHours(),":").concat(1===new Date(Date.parse(t.createdAt)).getMinutes().toString().length?"0"+new Date(Date.parse(t.createdAt)).getMinutes():new Date(Date.parse(t.createdAt)).getMinutes());if(r<c-864e5){var s=e.getTime()-n.getTime();N("".concat(Math.floor(s/1e3/60/60/24)," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, ").concat(a))}else N(r<c?"\u0412\u0447\u0435\u0440\u0430, ".concat(a):"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(a))}),[t]);var w=Object(f.j)().url,L=Object(f.h)(),P=r.a.useState(),U=Object(o.a)(P,2),F=U[0],A=U[1];return Object(c.useEffect)((function(){l.length>6&&k(l.slice(5,l.length-1).length)}),[l]),Object(c.useEffect)((function(){t&&("done"===t.status?A("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"):"pending"===t.status?A("\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"):"created"===t.status&&A("\u0421\u043e\u0437\u0434\u0430\u043d"))}),[t]),Object(O.jsx)(b.b,{className:qe.a.link,to:{pathname:"".concat(w,"/").concat(t.number),state:{background:L}},children:Object(O.jsxs)("div",{className:qe.a.container,onClick:function(){a(t)},children:[Object(O.jsxs)("div",{className:qe.a.header,children:[Object(O.jsxs)("p",{className:"".concat(qe.a.id),children:["#",t.number]}),Object(O.jsxs)("p",{className:"".concat(qe.a.date),children:[v," i-GMT+3"]})]}),Object(O.jsx)("p",{className:"".concat(qe.a.cardName,"text text_type_main-medium ml-6"),children:t.name}),R?Object(O.jsx)("p",{className:"".concat(qe.a.status),style:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"===F?{color:"#00CCCC"}:{color:"#F2F2F3"},children:F}):null,Object(O.jsxs)("div",{className:qe.a.footer,children:[Object(O.jsx)("ul",{className:qe.a.icons,children:l.map((function(e,t){return l.length>6&&5===t?Object(O.jsxs)("li",{className:qe.a.icon,children:[Object(O.jsx)("img",{className:qe.a.lastPick,src:e.image}),Object(O.jsx)("span",{className:qe.a.count,children:D})]},t):Object(O.jsx)("li",{className:qe.a.icon,children:Object(O.jsx)("img",{className:qe.a.pick,src:e.image})},t)}))}),Object(O.jsxs)("div",{className:qe.a.price,children:[Object(O.jsx)("p",{className:"".concat(qe.a.priceValue,"text text_type_digits-default mr-2"),children:_}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})})},Be="WS_CONNECTION_START",Me="WS_CONNECTION_SUCCESS",Qe="WS_CONNECTION_ERROR",We="WS_CONNECTION_CLOSED",Ve="WS_GET_MESSAGE",Xe="WS_SEND_MESSAGE",He="WS_CONNECTION_START_PROFILE",ze=function(){return{type:Be}},Je=function(){return{type:We}},Ye=function(e){var t=e.openModal,n=e.onClose,r=Object(f.h)(),a=N(),s=y((function(e){return e.loginReducer})).userData,i=y((function(e){return e.updateUserReducer})).updateUser,u=Object(c.useState)(""),l=Object(o.a)(u,2),d=l[0],p=l[1],m=Object(c.useState)(),_=Object(o.a)(m,2),h=_[0],g=_[1],x=Object(c.useState)(""),v=Object(o.a)(x,2),E=v[0],S=v[1],R=Object(c.useState)(!1),C=Object(o.a)(R,2),I=C[0],T=C[1],D=y((function(e){return e.loginReducer})).login,k=localStorage.getItem("access"),w=Object(f.g)();Object(c.useEffect)((function(){S(i.user?i.user.name:s.user?s.user.name:""),p(i.user?i.user.email:s.user?s.user.email:"")}),[s]),Object(c.useEffect)((function(){k||D||w.replace({pathname:"/login"})}),[k,w,D]),Object(c.useEffect)((function(){s.user&&E&&(s.user.name!==E||s.user.email!==d?T(!0):T(!1))}),[E,s,d]);var L=y((function(e){return e.wsReducer})).messages,P=Object(c.useState)(),U=Object(o.a)(P,2),F=U[0],A=U[1];return Object(c.useEffect)((function(){L&&L.orders&&A(L.orders.reverse())}),[L]),Object(c.useEffect)((function(){return"/profile/orders"===r.pathname&&a({type:He}),function(){a(Je())}}),[a,r.pathname]),Object(O.jsxs)("section",{className:ke.a.container,children:[Object(O.jsxs)("div",{className:ke.a.main,children:[Object(O.jsx)("nav",{className:ke.a.nav,children:Object(O.jsxs)("ul",{className:ke.a.navList,children:[Object(O.jsx)(b.b,{to:"/profile",className:ke.a.link,children:Object(O.jsx)("li",{className:"".concat("/profile"===r.pathname?ke.a.list_active:ke.a.list," text text_type_main-medium text_color_inactive mb-6"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(O.jsx)(b.b,{to:"/profile/orders",className:ke.a.link,children:Object(O.jsx)("li",{className:"".concat("/profile/orders"===r.pathname?ke.a.list_active:ke.a.list," text text_type_main-medium text_color_inactive mb-6"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(O.jsx)(b.b,{to:"/login",className:ke.a.link,children:Object(O.jsx)("li",{className:"".concat(ke.a.list," text text_type_main-medium text_color_inactive mb-6"),onClick:function(e){e.preventDefault(),a(be(function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}("refresh")))},children:"\u0412\u044b\u0445\u043e\u0434"})})]})}),"/profile"===r.pathname&&Object(O.jsxs)("div",{className:ke.a.inputs,children:[Object(O.jsx)(j.Input,{type:"text",placeholder:"\u0418\u043c\u044f",icon:"EditIcon",value:E||"",onChange:function(e){S(e.target.value)}}),Object(O.jsx)(j.Input,{placeholder:"\u041b\u043e\u0433\u0438\u043d",type:"email",icon:"EditIcon",value:d||"",onChange:function(e){p(e.target.value)}}),Object(O.jsx)(j.Input,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",icon:"EditIcon",value:h||"",onChange:function(e){g(e.target.value)}})]}),"/profile/orders"===r.pathname&&Object(O.jsx)("div",{className:ke.a.orders,children:F?F.map((function(e){return Object(O.jsx)(Ge,{order:e,status:!0,onOpen:t,onClose:n},e._id)})):null})]}),"/profile/orders"!==r.pathname?Object(O.jsxs)("div",{className:ke.a.footer,children:[Object(O.jsx)("p",{className:"".concat(ke.a.info," text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(O.jsxs)("div",{className:I?ke.a.buttons_active:ke.a.buttons,children:[Object(O.jsx)(j.Button,{type:"secondary",size:"medium",onClick:function(e){e.preventDefault(),S(i.user?i.user.name:s.user.name),p(i.user?i.user.email:s.user.email),g(""),T(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(O.jsx)(j.Button,{type:"primary",size:"medium",onClick:function(e){e.preventDefault(),a(Ue(k,d,h,E)),T(!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}):Object(O.jsx)("p",{className:ke.a.orderListInfo,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})},Ke=n(2),$e=n(54),Ze=["children"],et=function(e){var t=e.children,n=Object($e.a)(e,Ze),c=localStorage.getItem("access");return Object(O.jsx)(f.b,Object(Ke.a)(Object(Ke.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(O.jsx)(f.a,{to:{pathname:"/login",state:{from:n}}})}}))},tt="UPDATE_TOKEN_REQUEST",nt="UPDATE_TOKEN_SUCCESS",ct="UPDATE_TOKEN_FAILED",rt=function(e){return function(t){var n;t({type:tt}),(n=e,fetch(D+"/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})}).then((function(e){return e.json()}))).then((function(e){e.success?(localStorage.setItem("access",e.accessToken),localStorage.setItem("refresh",e.refreshToken),t({type:nt,updateTokenData:e})):t({type:ct})})).catch((function(e){console.log(e)}))}},at=n(25),st=n.n(at),ot=function(e){var t=e.modal,n=y((function(e){return e.appReducer})).currentIngredient,r=Object(f.i)().id;return Object(c.useEffect)((function(){r&&t(r)}),[r]),Object(O.jsxs)("div",{className:st.a.container,children:[Object(O.jsx)("h2",{className:"".concat(st.a.name,"text text_type_main-large mt-10 ml-10"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(O.jsxs)("div",{className:st.a.description,children:[Object(O.jsx)("img",{className:st.a.img,src:n.image_large,alt:n.name}),Object(O.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8",children:n.name}),Object(O.jsxs)("ul",{className:"".concat(st.a.stat," mb-15"),children:[Object(O.jsxs)("div",{className:"".concat(st.a.list," mr-5"),children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n.calories})]}),Object(O.jsxs)("div",{className:"".concat(st.a.list," mr-5"),children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n.proteins})]}),Object(O.jsxs)("div",{className:"".concat(st.a.list," mr-5"),children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n.fat})]}),Object(O.jsxs)("div",{className:st.a.list,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n.carbohydrates})]})]})]})]})},it=n(106),ut=n.n(it),lt="ADD_MODAL_DATA",dt="DELETE_MODAL_DATA",jt="ADD_MODAL_PROFILE",bt=function(e){return{type:lt,item:e}},ft=function(e){return{type:jt,order:e}},Ot=function(){var e=N(),t=y((function(e){return e.ingredientsReducer})).ingredients,n=Object(c.useState)(),r=Object(o.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(),u=Object(o.a)(i,2),l=u[0],d=u[1];return Object(c.useEffect)((function(){l&&s(t.find((function(e){return e._id===l})))}),[t]),Object(c.useEffect)((function(){a&&e(bt(a))}),[a,e]),Object(O.jsx)("div",{className:ut.a.container,children:Object(O.jsx)(ot,{modal:function(e){d(e)}})})},pt="GET_INGREDIENTS_REQUEST",mt="GET_INGREDIENTS_SUCCESS",_t="GET_INGREDIENTS_FAILED",ht=function(){return{type:_t}},gt=function(){return function(e){e({type:pt}),fetch("".concat(D,"/ingredients")).then(w).then((function(t){var n;t.success?e((n=t.data,{type:mt,ingredients:n})):e(ht())})).catch((function(t){e(ht()),console.log(t)}))}},xt=n(107),vt=n.n(xt),yt=n(56),Nt=n.n(yt),Et=function(e){var t=e.openModal,n=e.onClose,r=Object(c.useState)(),a=Object(o.a)(r,2),s=a[0],i=a[1],u=y((function(e){return e.wsReducer})).messages;return Object(c.useEffect)((function(){u&&u.orders&&i(u.orders)}),[u]),Object(O.jsxs)("section",{className:Nt.a.block,children:[Object(O.jsx)("h2",{className:"".concat(Nt.a.title,"text text_type_main-large mb-5 mt-10"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(O.jsx)("div",{className:Nt.a.container,children:s?s.map((function(e){return Object(O.jsx)(Ge,{order:e,status:!1,onOpen:t,onClose:n},e._id)})):null})]})},St=n(28),Rt=n.n(St);var Ct=function(){var e=y((function(e){return e.wsReducer})).messages,t=Object(c.useState)(),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){e&&e.orders&&a(e.orders)}),[e]),Object(O.jsxs)("div",{className:Rt.a.container,children:[Object(O.jsxs)("div",{className:Rt.a.readiness,children:[Object(O.jsxs)("div",{className:Rt.a.statusBlock,children:[Object(O.jsx)("h3",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(O.jsx)("ul",{className:Rt.a.statusList,children:r?r.map((function(e,t){if("done"===e.status)return Object(O.jsx)("li",{className:Rt.a.idReady,children:e.number},t)})):null})]}),Object(O.jsxs)("div",{className:Rt.a.statusBlock,children:[Object(O.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(O.jsx)("ul",{className:Rt.a.statusList,children:r?r.map((function(e,t){if("pending"===e.status)return Object(O.jsx)("li",{className:Rt.a.idWork,children:e.number},t)})):null})]})]}),Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(O.jsx)("p",{className:"text text_type_digits-large mb-15",children:e.total}),Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(O.jsx)("p",{className:"text text_type_digits-large",children:e.totalToday})]})},It=function(e){var t=e.openModal,n=e.onClose,r=N();return Object(c.useEffect)((function(){return r(ze()),function(){r(Je())}}),[r]),Object(O.jsxs)("section",{className:vt.a.block,children:[Object(O.jsx)(Et,{openModal:t,onClose:n}),Object(O.jsx)(Ct,{})]})},Tt=n(14),Dt=n.n(Tt),kt=function(e){var t=e.modal,n=Object(f.i)().id;Object(c.useEffect)((function(){n&&t(n)}),[n]);var a=y((function(e){return e.appReducer})).currentOrder,s=y((function(e){return e.ingredientsReducer})).ingredients,i=r.a.useState([]),u=Object(o.a)(i,2),l=u[0],d=u[1],b=r.a.useState(),p=Object(o.a)(b,2),m=p[0],_=p[1],h=r.a.useState(),g=Object(o.a)(h,2),x=g[0],v=g[1],N=r.a.useState(),E=Object(o.a)(N,2),S=E[0],R=E[1];Object(c.useEffect)((function(){if(a.ingredients){var e=[];a.ingredients.map((function(t){var n=s.filter((function(e){return e._id===t}));e.push(n[0])})),d(e)}}),[a]),Object(c.useEffect)((function(){var e=new Date,t=new Date(Date.parse(a.createdAt)),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf(),c=Date.parse(a.createdAt).valueOf(),r="".concat(new Date(Date.parse(a.createdAt)).getHours(),":").concat(1===new Date(Date.parse(a.createdAt)).getMinutes().toString().length?"0"+new Date(Date.parse(a.createdAt)).getMinutes():new Date(Date.parse(a.createdAt)).getMinutes());if(c<n-864e5){var s=e.getTime()-t.getTime();_("".concat(Math.floor(s/1e3/60/60/24)," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, ").concat(r))}else _(c<n?"\u0412\u0447\u0435\u0440\u0430, ".concat(r):"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(r))}),[a]),Object(c.useEffect)((function(){var e=l.reduce((function(e,t){return e+t.price}),0);v(e)}),[l]);var C=Array.from(new Set(l));return Object(c.useEffect)((function(){a&&("done"===a.status?R("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"):"pending"===a.status?R("\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"):"created"===a.status&&R("\u0421\u043e\u0437\u0434\u0430\u043d"))}),[a]),Object(O.jsxs)("section",{className:Dt.a.container,children:[Object(O.jsxs)("p",{className:Dt.a.id,children:["#",a.number]}),Object(O.jsx)("h2",{className:"text text_type_main-medium",children:a.name}),Object(O.jsx)("p",{className:Dt.a.status,style:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"===S?{color:"#00CCCC"}:{color:"#F2F2F3"},children:S}),Object(O.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(O.jsx)("div",{className:Dt.a.orderList,children:Object(O.jsx)("ul",{className:Dt.a.list,children:C.map((function(e,t){var n=l.filter((function(t){return t._id===e._id})).length;return Object(O.jsxs)("li",{className:Dt.a.ingredient,children:[Object(O.jsx)("div",{className:Dt.a.icon,children:Object(O.jsx)("img",{className:Dt.a.img,src:e.image})}),Object(O.jsx)("p",{className:Dt.a.name,children:e.name}),Object(O.jsxs)("div",{className:Dt.a.price,children:[Object(O.jsxs)("p",{className:Dt.a.priceValue,children:[n," x ",e.price]}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]})]},t)}))})}),Object(O.jsxs)("div",{className:Dt.a.footer,children:[Object(O.jsxs)("p",{className:Dt.a.date,children:[m," i-GMT+3"]}),Object(O.jsxs)("div",{className:Dt.a.resultPrice,children:[Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:x}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})},wt=n(108),Lt=n.n(wt);var Pt=function(){var e=N(),t=r.a.useState(),n=Object(o.a)(t,2),a=n[0],s=n[1],i=r.a.useState(),u=Object(o.a)(i,2),l=u[0],d=u[1],j=y((function(e){return e.wsReducer})).messages,b=r.a.useState(),f=Object(o.a)(b,2),p=f[0],m=f[1];return Object(c.useEffect)((function(){e(ze())}),[e]),Object(c.useEffect)((function(){j&&j.orders&&m(j.orders)}),[e,j]),Object(c.useEffect)((function(){a&&p&&d(p.find((function(e){return e.number.toString()===a})))}),[e,a,p]),Object(c.useEffect)((function(){l&&e(ft(l))}),[l,e]),Object(O.jsx)("div",{className:Lt.a.container,children:Object(O.jsx)(kt,{modal:function(e){s(e)}})})};var Ut,Ft,At=function(){var e=r.a.useState(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],s=r.a.useState(!1),i=Object(o.a)(s,2),l=i[0],d=i[1],j=r.a.useState(!0),b=Object(o.a)(j,2),m=b[0],_=b[1],h=N();Object(c.useEffect)((function(){h(gt())}),[h]);var g=y((function(e){return e.ingredientsReducer})).ingredients,x=r.a.useState(),v=Object(o.a)(x,2),E=v[0],R=v[1],C=r.a.useState(),I=Object(o.a)(C,2),T=I[0],D=I[1],k=function(e){h(ft(e)),_(!0)};function w(){a(!1),_(!1),G.goBack()}function L(){a(!1),d(!1),_(!1)}Object(c.useEffect)((function(){E&&D(g.find((function(e){return e._id===E})))}),[E,g]),Object(c.useEffect)((function(){T&&(h(bt(T)),a(!0))}),[T,h]);var P=y((function(e){return e.updateTokenReducer})).updateTokenSuccess,U=y((function(e){return e.loginReducer})).userFailed;function A(e){h(fe(e))}Object(c.useEffect)((function(){var e=localStorage.getItem("access");e&&A(e)}),[]),Object(c.useEffect)((function(){var e=localStorage.getItem("access");P&&A(e)}),[P]),Object(c.useEffect)((function(){var e=localStorage.getItem("refresh");U&&h(rt(e))}),[h,U]);var q=Object(f.h)(),G=Object(f.g)(),B=q.state&&q.state.background,M=r.a.useState(),Q=Object(o.a)(M,2),W=Q[0],V=Q[1],X=r.a.useState(),H=Object(o.a)(X,2),z=H[0],J=H[1],Y=y((function(e){return e.wsReducer})).messages,ee=r.a.useState(),te=Object(o.a)(ee,2),ne=te[0],ce=te[1];Object(c.useEffect)((function(){Y&&Y.orders&&ce(Y.orders)}),[h,Y]);var re=function(e){V(e)};return Object(c.useEffect)((function(){W&&ne&&J(ne.find((function(e){return e.number.toString()===W})))}),[h,W,ne]),Object(c.useEffect)((function(){z&&(h(ft(z)),_(!0))}),[z,h]),Object(O.jsxs)("div",{className:u.a.page,children:[Object(O.jsx)(p,{}),Object(O.jsxs)(f.d,{location:B||q,children:[Object(O.jsx)(f.b,{path:"/",exact:!0,children:Object(O.jsx)("section",{className:u.a.menu,children:Object(O.jsxs)(Z.a,{backend:$.a,children:[Object(O.jsx)(S,{onClose:L,openModal:function(e){h(bt(e)),a(!0)}}),Object(O.jsx)(K,{onClose:L,onOpen:l,openModal:function(){d(!0)}})]})})}),Object(O.jsx)(f.b,{path:"/login",exact:!0,children:Object(O.jsx)(Oe,{})}),Object(O.jsx)(f.b,{path:"/register",exact:!0,children:Object(O.jsx)(ge,{})}),Object(O.jsx)(f.b,{path:"/forgot-password",exact:!0,children:Object(O.jsx)(Ee,{})}),Object(O.jsx)(f.b,{path:"/reset-password",exact:!0,children:Object(O.jsx)(Te,{})}),Object(O.jsx)(f.b,{path:"/feed",exact:!0,children:Object(O.jsx)(It,{openModal:k,onClose:L})}),Object(O.jsx)(f.b,{path:"/feed/:id",exact:!0,children:Object(O.jsx)(Pt,{})}),Object(O.jsx)(f.b,{path:"/profile",exact:!0,children:Object(O.jsx)(et,{children:Object(O.jsx)(Ye,{openModal:k,onClose:L})})}),Object(O.jsx)(f.b,{path:"/profile/orders",exact:!0,children:Object(O.jsx)(et,{children:Object(O.jsx)(Ye,{openModal:k,onClose:L})})}),Object(O.jsx)(f.b,{path:"/profile/orders/:id",exact:!0,children:Object(O.jsx)(et,{children:Object(O.jsx)(Pt,{})})}),Object(O.jsx)(f.b,{path:"/ingredients/:id",children:Object(O.jsx)(Ot,{})})]}),B&&Object(O.jsx)(f.b,{path:"/ingredients/:id",children:Object(O.jsx)(F,{onClose:w,onOpen:n,children:Object(O.jsx)(ot,{modal:function(e){R(e)}})})}),B&&Object(O.jsx)(f.b,{path:"/feed/:id",children:Object(O.jsx)(F,{onClose:w,onOpen:m,children:Object(O.jsx)(kt,{modal:re})})}),B&&Object(O.jsx)(f.b,{path:"/profile/orders/:id",children:Object(O.jsx)(F,{onClose:w,onOpen:m,children:Object(O.jsx)(kt,{modal:re})})})]})},qt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},Gt=(n(200),n(29)),Bt={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1},Mt={currentIngredient:{},currentOrder:{}},Qt=n(81),Wt=n.n(Qt),Vt={ingredientsInBurgerConstructor:{bun:[],other:[]},createdOrder:{},orderRequest:!1,orderFailed:!1},Xt={forgotPassword:{},forgotPasswordRequest:!1,forgotPasswordFailed:!1},Ht={recoveryPassword:{},recoveryPasswordRequest:!1,recoveryPasswordFailed:!1},zt={registerData:{},registerRequest:!1,registerFailed:!1},Jt={loginData:{},loginRequest:!1,loginFailed:!1,logoutData:{},logoutRequest:!1,logoutFailed:!1,login:!1,userData:{},userRequest:!1,userFailed:!1,status:{}},Yt={updateUser:{},updateUserRequest:!1,updateUserFailed:!1,updatestatus:{}},Kt={updateTokenData:{},updateTokenRequest:!1,updateTokenFailed:!1,updateTokenSuccess:!1},$t="GET_ORDERLIST_REQUEST",Zt="GET_ORDERLIST_SUCCESS",en="GET_ORDERLIST_FAILED",tn={orderList:{},orderListRequest:!1,orderListFailed:!1},nn={wsConnected:!1,messages:{}},cn=Object(Gt.b)({ingredientsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return Object(Ke.a)(Object(Ke.a)({},e),{},{ingredientsRequest:!0});case mt:return Object(Ke.a)(Object(Ke.a)({},e),{},{ingredientsFailed:!1,ingredientsRequest:!1,ingredients:t.ingredients});case _t:return Object(Ke.a)(Object(Ke.a)({},Bt),{},{ingredientsFailed:!0});default:return e}},appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lt:return{currentIngredient:t.item};case jt:return{currentOrder:t.order};case dt:return Object(Ke.a)(Object(Ke.a)({},Mt),{},{currentIngredient:{},currentOrder:{}});default:return e}},constructorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(Ke.a)(Object(Ke.a)({},e),{},{orderRequest:!0});case H:return Object(Ke.a)(Object(Ke.a)({},e),{},{orderRequest:!1,orderFailed:!1,createdOrder:t.createdOrder});case z:return Object(Ke.a)(Object(Ke.a)({},Vt),{},{orderRequest:!1,orderFailed:!0});case J:return Object(Ke.a)(Object(Ke.a)({},e),{},{orderRequest:!1,orderFailed:!1,createdOrder:{}});case Q:return Object(Ke.a)(Object(Ke.a)({},e),{},{ingredientsInBurgerConstructor:"bun"===t.item.type?{bun:[t.item],other:Object(Fe.a)(e.ingredientsInBurgerConstructor.other)}:{bun:Object(Fe.a)(e.ingredientsInBurgerConstructor.bun),other:[].concat(Object(Fe.a)(e.ingredientsInBurgerConstructor.other),[t.item])}});case V:var n=Wt()(e.ingredientsInBurgerConstructor.other,{$splice:[[t.dragIndex,1]]}),c=Wt()(n,{$splice:[[t.hoverIndex,0,e.ingredientsInBurgerConstructor.other[t.dragIndex]]]});return Object(Ke.a)(Object(Ke.a)({},e),{},{ingredientsInBurgerConstructor:Object(Ke.a)(Object(Ke.a)({},e.ingredientsInBurgerConstructor),{},{bun:Object(Fe.a)(e.ingredientsInBurgerConstructor.bun),other:c})});case W:return Object(Ke.a)(Object(Ke.a)({},e),{},{ingredientsInBurgerConstructor:{bun:Object(Fe.a)(e.ingredientsInBurgerConstructor.bun),other:Object(Fe.a)(e.ingredientsInBurgerConstructor.other.filter((function(e,n){return e._id+n!==t.id})))}});default:return e}},forgotPasswordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(Ke.a)(Object(Ke.a)({},e),{},{forgotPasswordRequest:!0});case ve:return Object(Ke.a)(Object(Ke.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!1,forgotPassword:t.forgotPassword});case ye:return Object(Ke.a)(Object(Ke.a)({},Xt),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!0});default:return e}},recoveryPasswordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(Ke.a)(Object(Ke.a)({},e),{},{recoveryPasswordRequest:!0});case Re:return Object(Ke.a)(Object(Ke.a)({},e),{},{recoveryPasswordRequest:!1,recoveryPasswordFailed:!1,recoveryPassword:t.recoveryPassword});case Ce:return Object(Ke.a)(Object(Ke.a)({},Ht),{},{recoveryPasswordRequest:!1,recoveryPasswordFailed:!0});default:return e}},registerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(Ke.a)(Object(Ke.a)({},e),{},{registerRequest:!0});case me:return Object(Ke.a)(Object(Ke.a)({},e),{},{registerRequest:!1,registerFailed:!1,registerData:t.registerData});case _e:return Object(Ke.a)(Object(Ke.a)({},zt),{},{registerRequest:!1,registerFailed:!0});default:return e}},loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(Ke.a)(Object(Ke.a)({},e),{},{loginRequest:!0});case re:return Object(Ke.a)(Object(Ke.a)({},e),{},{loginRequest:!1,loginFailed:!1,loginData:t.loginData,login:!0});case ae:return Object(Ke.a)(Object(Ke.a)({},Jt),{},{loginRequest:!1,loginFailed:!0,login:!1});case se:return Object(Ke.a)(Object(Ke.a)({},e),{},{logoutRequest:!0});case oe:return Object(Ke.a)(Object(Ke.a)({},e),{},{logoutRequest:!1,logoutFailed:!1,logoutData:t.logoutData,login:!1});case ie:return Object(Ke.a)(Object(Ke.a)({},Jt),{},{logoutRequest:!1,logoutFailed:!0,login:!0});case ue:return Object(Ke.a)(Object(Ke.a)({},e),{},{userRequest:!0});case le:return Object(Ke.a)(Object(Ke.a)({},e),{},{userRequest:!1,userFailed:!1,userData:t.userData,login:!0});case de:return Object(Ke.a)(Object(Ke.a)({},Jt),{},{userRequest:!1,userFailed:!0,status:t.status});default:return e}},updateUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(Ke.a)(Object(Ke.a)({},e),{},{updateUserRequest:!0});case Le:return Object(Ke.a)(Object(Ke.a)({},e),{},{updateUserRequest:!1,updateUserFailed:!1,updateUser:t.updateUser});case Pe:return Object(Ke.a)(Object(Ke.a)({},Yt),{},{updateUserRequest:!1,updateUserFailed:!0,updatestatus:t.updatestatus});default:return e}},updateTokenReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return Object(Ke.a)(Object(Ke.a)({},e),{},{updateTokenRequest:!0});case nt:return Object(Ke.a)(Object(Ke.a)({},e),{},{updateTokenRequest:!1,updateTokenFailed:!1,updateTokenData:t.updateTokenData,updateTokenSuccess:!0});case ct:return Object(Ke.a)(Object(Ke.a)({},Kt),{},{updateTokenRequest:!1,updateTokenFailed:!0});default:return e}},orderListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $t:return Object(Ke.a)(Object(Ke.a)({},e),{},{orderListRequest:!0});case Zt:return Object(Ke.a)(Object(Ke.a)({},e),{},{orderListRequest:!1,orderListFailed:!1,orderList:t.orderList});case en:return Object(Ke.a)(Object(Ke.a)({},e),{},{orderListFailed:!0});default:return e}},wsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:case He:return Object(Ke.a)(Object(Ke.a)({},e),{},{error:void 0,wsConnected:!0});case Qe:return Object(Ke.a)(Object(Ke.a)({},e),{},{wsConnected:!1});case We:return Object(Ke.a)(Object(Ke.a)({},e),{},{error:void 0,wsConnected:!1});case Ve:return Object(Ke.a)(Object(Ke.a)({},e),{},{messages:t.payload});case Xe:return Object(Ke.a)(Object(Ke.a)({},e),{},{messages:{}});default:return e}}}),rn=n(109),an=["success"],sn={wsInit:Be,wsInitProfile:He,onOpen:Me,onClose:We,onError:Qe,onMessage:Ve},on=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Gt.c,un=on(Object(Gt.a)(rn.a,(Ut="wss://norma.nomoreparties.space/orders",Ft=sn,function(e){var t=null;return function(n){return function(c){var r=e.dispatch,a=c.type,s=Ft.wsInit,o=Ft.wsInitProfile,i=Ft.onOpen,u=Ft.onClose,l=Ft.onError,d=Ft.onMessage,j=localStorage.getItem("access");a===s&&(t=new WebSocket("".concat(Ut,"/all"))),a===o&&(t=new WebSocket("".concat(Ut,"?token=").concat(j.slice(7)))),t&&(t.onopen=function(e){r({type:i,payload:e})},t.onerror=function(e){r({type:l,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),c=(n.success,Object($e.a)(n,an));r({type:d,payload:c})},t.onclose=function(e){r({type:u,payload:e})}),n(c)}}}))),ln=Object(Gt.d)(cn,un);s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(v.a,{store:ln,children:Object(O.jsx)(b.a,{children:Object(O.jsx)(At,{})})})}),document.getElementById("root")),qt()},24:function(e,t,n){e.exports={block:"burger-constructor_block__1faIL",list:"burger-constructor_list__2lXaw",item:"burger-constructor_item__9YfeG",bun:"burger-constructor_bun__12nX_",total:"burger-constructor_total__2z4fk",sum:"burger-constructor_sum__487I2",container:"burger-constructor_container__332QY"}},25:function(e,t,n){e.exports={description:"ingredient-details_description__1Lsj6",stat:"ingredient-details_stat__raaV-",list:"ingredient-details_list__2aOfA"}},28:function(e,t,n){e.exports={container:"statusOrder_container__257Mm",readiness:"statusOrder_readiness__3Him3",statusBlock:"statusOrder_statusBlock__mW6_s",statusList:"statusOrder_statusList__2HWLD",idReady:"statusOrder_idReady__3KWNH",idWork:"statusOrder_idWork__2HqWk"}},30:function(e,t,n){e.exports={block:"burger-ingredients_block__4JbQ5",nav:"burger-ingredients_nav__ICNB4",item:"burger-ingredients_item__3x5fV",mainMenu:"burger-ingredients_mainMenu__6oCG9",tab:"burger-ingredients_tab__1Ru1Z"}},37:function(e,t,n){e.exports={card:"product-item_card__3f30t",image:"product-item_image__3O8nZ",price:"product-item_price__1ArbP",name:"product-item_name__VUo2_",count:"product-item_count__3nL_M"}},38:function(e,t,n){e.exports={container:"auth-form_container__m7eNv",form:"auth-form_form__1d4QB",footer:"auth-form_footer__1QPcI",footerLink:"auth-form_footerLink__3QtqB"}},55:function(e,t,n){e.exports={popup:"modal_popup__lnicy",close:"modal_close__1Iez6"}},56:function(e,t,n){e.exports={block:"listOrder_block__3UsEF",container:"listOrder_container__2jt9s",title:"listOrder_title__1IPX-"}},76:function(e,t,n){e.exports={page:"app_page__xu4mx",menu:"app_menu__2-T9n"}},79:function(e,t,n){e.exports={container:"order-details_container__1PXDt",done:"order-details_done__1ZCH5"}}},[[202,1,2]]]);
//# sourceMappingURL=main.23840d92.chunk.js.map